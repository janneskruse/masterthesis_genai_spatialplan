dataset_params:
  regions: ['Stuttgart'] # ['Leipzig'] # list of regions to include: 'Dresden', 'Leipzig', Hamburg', 'Stuttgart'
  zarr_name: "input_config_ge25_cc10_2019_2024_clipped.zarr"
  res: 3 # resolution in meters
  patch_size_m: 800 # patch size in meters
  im_channels: 3  # RGB satellite
  min_valid_percent: 90 # minimum percent of valid pixels in a patch
  stride_overlap: 2 # 50% overlap between patches --> 4 for 25% overlap, etc.
  
diffusion_params:
  num_timesteps: 1000
  beta_start: 0.0001
  beta_end: 0.02

ldm_params: # latent diffusion model parameters
  down_channels: [32, 64, 128, 256]
  mid_channels: [256, 256, 128]
  down_sample: [True, True, False]
  attn_down: [True, True, False]
  time_emb_dim: 128
  norm_channels: 32
  num_heads: 4
  conv_out_channels: 3
  num_down_layers: 2
  num_mid_layers: 2
  num_up_layers: 2
  
  # Conditioning configuration
  condition_config:
    condition_types: ['inpainting', 'osm_features', 'environmental']
    
    # Inpainting hole configuration
    hole_config:
      type: 'random_square'  # or 'center_square'
      size_px: 80

    # OSM feature layers to use
    osm_layers: ['buildings', 'streets', 'water']  # can add: 'landuse', 'buildings_heights', 'streets_service', 'streets_surface'
    
    # Environmental layers to use
    environmental_layers: ['ndvi', 'landsat_surface_temp_b10_masked']
    
    # Cross-attention for environmental targets
    use_cross_attention: True
    cross_attention_dim: 768

autoencoder_params:
  z_channels: 4
  codebook_size: 8192
  down_channels: [32, 64, 128, 128]
  mid_channels: [128, 128]
  down_sample: [True, True, True]
  attn_down: [False, False, False]
  norm_channels: 32
  num_heads: 4
  num_down_layers: 2
  num_mid_layers: 2
  num_up_layers: 2

train_params:
  seed: 42
  task_name: 'urban_layout_inpainting'
  ldm_batch_size: 4
  autoencoder_batch_size: 8
  disc_start: 10000
  disc_weight: 0.5
  codebook_weight: 1
  commitment_beta: 0.2
  perceptual_weight: 1
  kl_weight: 0.000001
  ldm_epochs: 200
  autoencoder_epochs: 50
  num_samples: 16
  num_grid_rows: 4
  ldm_lr: 0.00001
  autoencoder_lr: 0.0001
  autoencoder_acc_steps: 1
  autoencoder_img_save_steps: 64
  save_latents: True